<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>QextSerialPort: qextserialbase.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>qextserialbase.h</h1><div class="fragment"><pre>00001 
00002 <span class="preprocessor">#ifndef _QEXTSERIALBASE_H_</span>
00003 <span class="preprocessor"></span><span class="preprocessor">#define _QEXTSERIALBASE_H_</span>
00004 <span class="preprocessor"></span>
00005 <span class="preprocessor">#include &lt;QIODevice&gt;</span>
00006 <span class="preprocessor">#include &lt;QFile&gt;</span>
00007 
00008 <span class="preprocessor">#ifdef QT_THREAD_SUPPORT</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#include &lt;QThread&gt;</span>
00010 <span class="preprocessor">#endif</span>
00011 <span class="preprocessor"></span>
00012 <span class="comment">/*if all warning messages are turned off, flag portability warnings to be turned off as well*/</span>
00013 <span class="preprocessor">#ifdef _TTY_NOWARN_</span>
00014 <span class="preprocessor"></span><span class="preprocessor">#define _TTY_NOWARN_PORT_</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00016 <span class="preprocessor"></span>
00017 <span class="comment">/*macros for thread support*/</span>
00018 <span class="preprocessor">#ifdef QT_THREAD_SUPPORT</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#define LOCK_MUTEX() mutex-&gt;lock()</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define UNLOCK_MUTEX() mutex-&gt;unlock()</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#define LOCK_MUTEX()</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define UNLOCK_MUTEX()</span>
00024 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00025 <span class="preprocessor"></span>
00026 <span class="comment">/*macros for warning messages*/</span>
00027 <span class="preprocessor">#ifdef _TTY_NOWARN_PORT_</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#define TTY_PORTABILITY_WARNING(s)</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define TTY_PORTABILITY_WARNING(s) qWarning(s)</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#ifdef _TTY_NOWARN_</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#define TTY_WARNING(s)</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define TTY_WARNING(s) qWarning(s)</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00037 <span class="preprocessor"></span>
00038 
00039 <span class="comment">/*line status constants*/</span>
00040 <span class="preprocessor">#define LS_CTS  0x01</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#define LS_DSR  0x02</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#define LS_DCD  0x04</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#define LS_RI   0x08</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define LS_RTS  0x10</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define LS_DTR  0x20</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#define LS_ST   0x40</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define LS_SR   0x80</span>
00048 <span class="preprocessor"></span>
00049 <span class="comment">/*error constants*/</span>
00050 <span class="preprocessor">#define E_NO_ERROR                   0</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#define E_INVALID_FD                 1</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#define E_NO_MEMORY                  2</span>
00053 <span class="preprocessor"></span><span class="preprocessor">#define E_CAUGHT_NON_BLOCKED_SIGNAL  3</span>
00054 <span class="preprocessor"></span><span class="preprocessor">#define E_PORT_TIMEOUT               4</span>
00055 <span class="preprocessor"></span><span class="preprocessor">#define E_INVALID_DEVICE             5</span>
00056 <span class="preprocessor"></span><span class="preprocessor">#define E_BREAK_CONDITION            6</span>
00057 <span class="preprocessor"></span><span class="preprocessor">#define E_FRAMING_ERROR              7</span>
00058 <span class="preprocessor"></span><span class="preprocessor">#define E_IO_ERROR                   8</span>
00059 <span class="preprocessor"></span><span class="preprocessor">#define E_BUFFER_OVERRUN             9</span>
00060 <span class="preprocessor"></span><span class="preprocessor">#define E_RECEIVE_OVERFLOW          10</span>
00061 <span class="preprocessor"></span><span class="preprocessor">#define E_RECEIVE_PARITY_ERROR      11</span>
00062 <span class="preprocessor"></span><span class="preprocessor">#define E_TRANSMIT_OVERFLOW         12</span>
00063 <span class="preprocessor"></span><span class="preprocessor">#define E_READ_FAILED               13</span>
00064 <span class="preprocessor"></span><span class="preprocessor">#define E_WRITE_FAILED              14</span>
00065 <span class="preprocessor"></span>
00066 <span class="comment">/*enums for port settings*/</span>
00067 <span class="keyword">typedef</span> <span class="keyword">enum</span> _NamingConvention {
00068     WIN_NAMES,
00069     IRIX_NAMES,
00070     HPUX_NAMES,
00071     SUN_NAMES,
00072     DIGITAL_NAMES,
00073     FREEBSD_NAMES,
00074     LINUX_NAMES
00075 } NamingConvention;
00076 
00077 <span class="keyword">typedef</span> <span class="keyword">enum</span> _BaudRateType {
00078     BAUD50,                <span class="comment">//POSIX ONLY</span>
00079     BAUD75,                <span class="comment">//POSIX ONLY</span>
00080     BAUD110,
00081     BAUD134,               <span class="comment">//POSIX ONLY</span>
00082     BAUD150,               <span class="comment">//POSIX ONLY</span>
00083     BAUD200,               <span class="comment">//POSIX ONLY</span>
00084     BAUD300,
00085     BAUD600,
00086     BAUD1200,
00087     BAUD1800,              <span class="comment">//POSIX ONLY</span>
00088     BAUD2400,
00089     BAUD4800,
00090     BAUD9600,
00091     BAUD14400,             <span class="comment">//WINDOWS ONLY</span>
00092     BAUD19200,
00093     BAUD38400,
00094     BAUD56000,             <span class="comment">//WINDOWS ONLY</span>
00095     BAUD57600,
00096     BAUD76800,             <span class="comment">//POSIX ONLY</span>
00097     BAUD115200,
00098     BAUD128000,            <span class="comment">//WINDOWS ONLY</span>
00099     BAUD256000             <span class="comment">//WINDOWS ONLY</span>
00100 } BaudRateType;
00101 
00102 <span class="keyword">typedef</span> <span class="keyword">enum</span> _DataBitsType {
00103     DATA_5,
00104     DATA_6,
00105     DATA_7,
00106     DATA_8
00107 } DataBitsType;
00108 
00109 <span class="keyword">typedef</span> <span class="keyword">enum</span> _ParityType {
00110     PAR_NONE,
00111     PAR_ODD,
00112     PAR_EVEN,
00113     PAR_MARK,               <span class="comment">//WINDOWS ONLY</span>
00114     PAR_SPACE
00115 } ParityType;
00116 
00117 <span class="keyword">typedef</span> <span class="keyword">enum</span> _StopBitsType {
00118     STOP_1,
00119     STOP_1_5,               <span class="comment">//WINDOWS ONLY</span>
00120     STOP_2
00121 } StopBitsType;
00122 
00123 <span class="keyword">typedef</span> <span class="keyword">enum</span> _FlowType {
00124     FLOW_OFF,
00125     FLOW_HARDWARE,
00126     FLOW_XONXOFF
00127 } FlowType;
00128 
00129 <span class="comment">/*structure to contain port settings*/</span>
00130 <span class="keyword">typedef</span> <span class="keyword">struct </span>_PortSettings {
00131     BaudRateType BaudRate;
00132     DataBitsType DataBits;
00133     ParityType Parity;
00134     StopBitsType StopBits;
00135     FlowType FlowControl;
00136     ulong Timeout_Sec;
00137     ulong Timeout_Millisec;
00138 } PortSettings;
00139 
<a name="l00140"></a><a class="code" href="classQextSerialBase.html">00140</a> <span class="keyword">class </span><a class="code" href="classQextSerialBase.html">QextSerialBase</a>:<span class="keyword">public</span> QIODevice {
00141 <span class="keyword">public</span>:
00142     <a class="code" href="classQextSerialBase.html#a0">QextSerialBase</a>();
00143     <a class="code" href="classQextSerialBase.html#a0">QextSerialBase</a>(<span class="keyword">const</span> QString &amp; name);
00144     <span class="keyword">virtual</span> <a class="code" href="classQextSerialBase.html#a2">~QextSerialBase</a>();
00145     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQextSerialBase.html#a3">construct</a>();
00146     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classQextSerialBase.html#a4">setPortName</a>(<span class="keyword">const</span> QString &amp; name);
00147     <span class="keyword">virtual</span> QString <a class="code" href="classQextSerialBase.html#a5">portName</a>() <span class="keyword">const</span>;
00148 
00149     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setBaudRate(BaudRateType)=0;
00150     <span class="keyword">virtual</span> BaudRateType <a class="code" href="classQextSerialBase.html#a7">baudRate</a>() <span class="keyword">const</span>;
00151     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setDataBits(DataBitsType)=0;
00152     <span class="keyword">virtual</span> DataBitsType <a class="code" href="classQextSerialBase.html#a9">dataBits</a>() <span class="keyword">const</span>;
00153     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setParity(ParityType)=0;
00154     <span class="keyword">virtual</span> ParityType <a class="code" href="classQextSerialBase.html#a11">parity</a>() <span class="keyword">const</span>;
00155     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setStopBits(StopBitsType)=0;
00156     <span class="keyword">virtual</span> StopBitsType <a class="code" href="classQextSerialBase.html#a13">stopBits</a>() <span class="keyword">const</span>;
00157     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setFlowControl(FlowType)=0;
00158     <span class="keyword">virtual</span> FlowType <a class="code" href="classQextSerialBase.html#a15">flowControl</a>() <span class="keyword">const</span>;
00159     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setTimeout(ulong, ulong)=0;
00160 
00161     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> open(OpenMode mode=0)=0;
00162     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classQextSerialBase.html#a18">isOpen</a>() <span class="keyword">const</span>;
00163     <span class="keyword">virtual</span> <span class="keywordtype">void</span> close()=0;
00164     <span class="keyword">virtual</span> <span class="keywordtype">void</span> flush()=0;
00165 
00166     <span class="keyword">virtual</span> qint64 size() <span class="keyword">const</span>=0;
00167     <span class="keyword">virtual</span> qint64 bytesAvailable() <span class="keyword">const</span>=0;
00168     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classQextSerialBase.html#a23">atEnd</a>() <span class="keyword">const</span>;
00169 
00170     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> getChar(<span class="keywordtype">char</span> * c)=0;
00171     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> putChar(<span class="keywordtype">char</span> c)=0;
00172     <span class="keyword">virtual</span> <span class="keywordtype">void</span> ungetChar(<span class="keywordtype">char</span> c)=0;
00173     <span class="keyword">virtual</span> qint64 <a class="code" href="classQextSerialBase.html#a27">readLine</a>(<span class="keywordtype">char</span> * data, qint64 maxSize);
00174 
00175     <span class="keyword">virtual</span> ulong <a class="code" href="classQextSerialBase.html#a28">lastError</a>() <span class="keyword">const</span>;
00176     <span class="keyword">virtual</span> <span class="keywordtype">void</span> translateError(ulong error)=0;
00177 
00178     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setDtr(<span class="keywordtype">bool</span> set=<span class="keyword">true</span>)=0;
00179     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setRts(<span class="keywordtype">bool</span> set=<span class="keyword">true</span>)=0;
00180     <span class="keyword">virtual</span> ulong lineStatus()=0;
00181 
00182     <span class="keyword">virtual</span> qint64 readData(<span class="keywordtype">char</span> * data, qint64 maxSize)=0;
00183     <span class="keyword">virtual</span> qint64 writeData(<span class="keyword">const</span> <span class="keywordtype">char</span> * data, qint64 maxSize)=0;
00184 
00185 <span class="keyword">protected</span>:
00186     QString port;
00187     <span class="keywordtype">bool</span> portOpen;
00188     PortSettings Settings;
00189     ulong lastErr;
00190 
00191 <span class="preprocessor">#ifdef QT_THREAD_SUPPORT</span>
00192 <span class="preprocessor"></span>    <span class="keyword">static</span> QMutex* mutex;
00193     <span class="keyword">static</span> ulong refCount;
00194 <span class="preprocessor">#endif</span>
00195 <span class="preprocessor"></span>};
00196 
00197 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Jul 9 11:14:24 2005 for QextSerialPort by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
